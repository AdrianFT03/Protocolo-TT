	.EQU	INCREMENTO,		1
	.EQU	DECREMENTO,		0
	.EQU	SHIFT_ON,		1
	.EQU	SHIFT_OFF,		0
	.EQU	MODO_8BITS,		1
	.EQU	MODO_4BITS,		0
	.EQU	DOS_LINEAS,		1
	.EQU	UNA_LINEA,		0
	.EQU	_5X10,			1
	.EQU	_5X8,			0
	.EQU	DISPLAY_ON,		1
	.EQU	DISPLAY_OFF,	0
	.EQU	CURSOR_ON,		1
	.EQU	CURSOR_OFF,		0
	.EQU	BLINK_ON,		1
	.EQU	BLINK_OFF,		0
	.EQU	SHIFT_DISPLAY,	1
	.EQU	MOVE_CURSOR,	0
	.EQU	SHIFT_RIGHT,	1
	.EQU	SHIFT_LEFT,		0

	.EQU	MODO_CONFIG_LCD, MODO_4BITS

.MACRO IMPRIMIR DIR, CADENA
		
		DDRAM_ADDRESS_SET \DIR

		MOV		#tblpage(\CADENA),	W0
		MOV		W0,					TBLPAG
		MOV		#tbloffset(\CADENA), W1
LETRAS\@:
		TBLRDL.B [W1++],		W0

		CP0.B	W0
		BRA 	Z,				FIN_IMPRIMIR\@

		CALL	BANDERA_OCUPADO_LCD
		.IF( MODO_CONFIG_LCD == MODO_8BITS )
			CALL	DATO_LCD
		.ELSE
			CALL	DATO_LCD_4BITS
		.ENDIF

		GOTO	LETRAS\@
FIN_IMPRIMIR\@:
.ENDM

.MACRO DISPLAY_CLEAR
	CALL		BANDERA_OCUPADO_LCD
	MOV			#0X01,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF
.ENDM

.MACRO DISPLAY_CURSOR_HOME
	CALL		BANDERA_OCUPADO_LCD
	MOV			#0X02,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF
.ENDM

.MACRO ENTRY_MODE_SET ID, S
	.EQU		DATO,		0B00000100

	.IF( \ID == INCREMENTO )
		.EQU	DATO,		DATO | 0B00000010
	.ENDIF
	.IF( \S == SHIFT_ON )
		.EQU	DATO,		DATO | 0B00000001
	.ENDIF
	
	CALL		BANDERA_OCUPADO_LCD
	MOV			#DATO,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF

.ENDM

.MACRO 	DISPLAY_ON_OFF D, C, B
	.EQU	DATO,			0B00001000
	
	.IF( \D == DISPLAY_ON )
		.EQU	DATO,		DATO | 0B00000100
	.ENDIF
	.IF( \C == CURSOR_ON )
		.EQU	DATO,		DATO | 0B00000010
	.ENDIF
	.IF( \B == BLINK_ON )
		.EQU	DATO,		DATO | 0B00000001
	.ENDIF
	
	CALL		BANDERA_OCUPADO_LCD
	MOV			#DATO,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF
.ENDM

.MACRO 	FUNCTION_SET DL, N, F
	.EQU	DATO,			0B00100000
	
	.IF( \DL == MODO_8BITS )
		.EQU	DATO,		DATO | 0B00010000
	.ENDIF
	.IF( \N == DOS_LINEAS )
		.EQU	DATO,		DATO | 0B00001000
	.ENDIF
	.IF( \F == _5X10 )
		.EQU	DATO,		DATO | 0B00000100
	.ENDIF
	
	CALL		BANDERA_OCUPADO_LCD
	MOV			#DATO,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF
.ENDM

.MACRO 	DISPLAY_CURSOR_SHIFT SC, RL
	.EQU	DATO,			0B00010000
	
	.IF( \SC == SHIFT_DISPLAY )
		.EQU	DATO,		DATO | 0B00001000
	.ENDIF
	.IF( \RL == SHIFT_RIGHT )
		.EQU	DATO,		DATO | 0B00000100
	.ENDIF
	
	CALL		BANDERA_OCUPADO_LCD
	MOV			#DATO,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF
.ENDM

.MACRO 	DDRAM_ADDRESS_SET DIR_DDRAM
	.EQU	DATO,		0B10000000
	.EQU	DATO,		DATO | \DIR_DDRAM
	
	CALL		BANDERA_OCUPADO_LCD
	MOV			#DATO,			W0		;
	.IF( MODO_CONFIG_LCD == MODO_8BITS )
		CALL	COMANDO_LCD
	.ELSE
		CALL	COMANDO_LCD_4BITS
	.ENDIF
.ENDM








